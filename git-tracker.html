<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AcreetionOS Git Tracker // Development Activity</title>
    <!-- Font Awesome 6.7.1 CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">
    <link rel="icon" type="image/webp" href="acreetionoslogo.webp">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --acreetion-green: #2ecc71;
            --acreetion-body-bg: #121212;
            --acreetion-panel-bg: #1a1a1a;
            --acreetion-box-bg: #222222;
            --acreetion-box-border: #333333;
            --acreetion-text-bright: #e5e5e5;
            --acreetion-text: #b2b2b2;
            --acreetion-code-bg: rgba(46, 204, 113, 0.1);
            --storm-color: #61afef;
            --flasher-color: #f39c12;
            --acreetion-purple: #9b59b6;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--acreetion-body-bg);
            color: var(--acreetion-text-bright);
            line-height: 1.6;
        }

        .page-header {
            background-color: var(--acreetion-panel-bg);
            border-bottom: 2px solid var(--acreetion-green);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0.75rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-family: var(--font-mono);
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--acreetion-text-bright);
            text-decoration: none;
        }

        .logo-img {
            height: 40px;
        }

        .logo-text span {
            color: var(--acreetion-green);
        }

        .main-nav a {
            color: var(--acreetion-text);
            text-decoration: none;
            margin-left: 2rem;
            font-weight: 500;
        }

        .main-nav a:hover {
            color: var(--acreetion-text-bright);
        }

        .page-wrapper {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .content-box {
            background-color: var(--acreetion-box-bg);
            border: 1px solid var(--acreetion-box-border);
            border-radius: 0;
            margin-bottom: 2rem;
        }

        .box-header {
            padding: 0.8rem 1.2rem;
            border-bottom: 1px solid var(--acreetion-box-border);
            background-color: #1a1a1a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .box-header h2 {
            font-family: var(--font-mono);
            font-size: 1.3rem;
            color: var(--acreetion-green);
            font-weight: 700;
        }

        .box-body {
            padding: 1.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background-color: var(--acreetion-panel-bg);
            border: 1px solid var(--acreetion-box-border);
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--acreetion-green);
            font-family: var(--font-mono);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--acreetion-text);
            margin-top: 0.5rem;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 2rem;
        }

        .git-history-timeline {
            position: relative;
            padding: 1rem 0;
        }

        .git-commit-entry {
            position: relative;
            padding: 1rem 0 1rem 4rem;
            border-left: 2px solid var(--acreetion-green);
            margin-left: 1.5rem;
        }

        .git-commit-entry:last-child {
            border-left: 2px solid transparent;
        }

        .git-commit-dot {
            position: absolute;
            left: -6px;
            top: 1.5rem;
            width: 12px;
            height: 12px;
            background-color: var(--acreetion-green);
            border-radius: 50%;
            border: 2px solid var(--acreetion-body-bg);
            box-shadow: 0 0 0 2px var(--acreetion-green);
        }

        .git-commit-card {
            background-color: var(--acreetion-panel-bg);
            border: 1px solid var(--acreetion-box-border);
            padding: 1rem;
            border-radius: 4px;
            transition: border-color 0.3s ease;
        }

        .git-commit-card:hover {
            border-color: var(--acreetion-green);
        }

        .git-commit-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }

        .git-commit-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .git-commit-author-info {
            flex: 1;
        }

        .git-commit-author {
            color: var(--acreetion-green);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .git-commit-time {
            color: var(--acreetion-text);
            font-size: 0.8rem;
        }

        .git-commit-sha-badge {
            font-family: var(--font-mono);
            background-color: var(--acreetion-code-bg);
            border: 1px solid rgba(46, 204, 113, 0.3);
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-size: 0.85rem;
            color: var(--storm-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .git-commit-sha-badge:hover {
            background-color: rgba(46, 204, 113, 0.2);
            border-color: var(--acreetion-green);
            text-decoration: none;
        }

        .git-commit-message {
            color: var(--acreetion-text-bright);
            font-weight: 500;
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .git-commit-repo {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            background-color: rgba(97, 175, 239, 0.1);
            border: 1px solid rgba(97, 175, 239, 0.3);
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            color: var(--storm-color);
            font-weight: 500;
        }

        .git-commit-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--acreetion-text);
        }

        .git-stat-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .git-stat-additions {
            color: var(--acreetion-green);
        }

        .git-stat-deletions {
            color: #e74c3c;
        }

        .commits-list {
            list-style: none;
            padding: 0;
        }

        .commit-item {
            padding: 1rem;
            border-bottom: 1px solid var(--acreetion-box-border);
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .commit-item:last-child {
            border-bottom: none;
        }

        .commit-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .commit-details {
            flex: 1;
        }

        .commit-message {
            color: var(--acreetion-text-bright);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .commit-meta {
            font-size: 0.85rem;
            color: var(--acreetion-text);
        }

        .commit-author {
            color: var(--acreetion-green);
        }

        .commit-sha {
            font-family: var(--font-mono);
            color: var(--storm-color);
            text-decoration: none;
        }

        .commit-sha:hover {
            text-decoration: underline;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--acreetion-text);
        }

        .error {
            background-color: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            padding: 1rem;
            border-radius: 4px;
            color: #e74c3c;
        }

        .refresh-btn {
            background-color: var(--acreetion-green);
            color: black;
            border: none;
            padding: 0.5rem 1rem;
            font-weight: 700;
            cursor: pointer;
            font-family: var(--font-sans);
        }

        .refresh-btn:hover {
            filter: brightness(1.1);
        }

        .refresh-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .contributors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .contributor-card {
            background-color: var(--acreetion-panel-bg);
            border: 1px solid var(--acreetion-box-border);
            padding: 1rem;
            text-align: center;
        }

        .contributor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 0.5rem;
        }

        .contributor-name {
            font-weight: 600;
            color: var(--acreetion-text-bright);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .contributor-commits {
            font-size: 0.8rem;
            color: var(--acreetion-text);
        }

        .page-footer {
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
            border-top: 1px solid var(--acreetion-box-border);
            color: #777;
            font-size: 0.9rem;
        }

        .page-footer a {
            color: var(--acreetion-green);
            text-decoration: none;
        }

        .page-footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .main-nav {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
            }

            .main-nav a {
                margin-left: 0;
                padding: 0.5rem 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>

<body>
    <header class="page-header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <img src="acreetionoslogo.webp" class="logo-img" loading="lazy" decoding="async">
                <span class="logo-text">Acreetion<span>OS</span></span>
            </a>
            <nav class="main-nav">
                <a href="index.html">Home</a>
                <a href="git-tracker.html">Git Tracker</a>
                <a href="https://wiki.acreetionos.org" target="_blank" rel="noopener noreferrer">Wiki</a>
                <a href="contact.html">Contact</a>
            </nav>
        </div>
    </header>

    <div class="page-wrapper">
        <!-- Repository Stats Overview -->
        <div class="content-box">
            <div class="box-header">
                <h2><i class="fa-brands fa-github"></i> Repository Statistics</h2>
                <button class="refresh-btn" id="refreshBtn" onclick="refreshData()">
                    <i class="fa-solid fa-rotate"></i> Refresh
                </button>
            </div>
            <div class="box-body">
                <div id="statsLoading" class="loading">
                    <i class="fa-solid fa-spinner fa-spin"></i> Loading repository statistics...
                </div>
                <div id="statsContent" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalCommits">-</div>
                            <div class="stat-label">Total Commits</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalContributors">-</div>
                            <div class="stat-label">Contributors</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="openIssues">-</div>
                            <div class="stat-label">Open Issues</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalStars">-</div>
                            <div class="stat-label">Stars</div>
                        </div>
                    </div>
                </div>
                <div id="statsError" style="display: none;"></div>
            </div>
        </div>

        <!-- Commit Activity Chart -->
        <div class="content-box">
            <div class="box-header">
                <h2><i class="fa-solid fa-chart-line"></i> Commit Activity (Last 30 Days)</h2>
            </div>
            <div class="box-body">
                <div id="chartLoading" class="loading">
                    <i class="fa-solid fa-spinner fa-spin"></i> Loading commit activity...
                </div>
                <div id="chartContent" style="display: none;">
                    <div class="chart-container">
                        <canvas id="commitChart"></canvas>
                    </div>
                </div>
                <div id="chartError" style="display: none;"></div>
            </div>
        </div>

        <!-- Git Commit History -->
        <div class="content-box">
            <div class="box-header">
                <h2><i class="fa-solid fa-code-branch"></i> Git Commit History</h2>
            </div>
            <div class="box-body">
                <div id="commitsLoading" class="loading">
                    <i class="fa-solid fa-spinner fa-spin"></i> Loading git history...
                </div>
                <div id="commitsContent" style="display: none;">
                    <div class="git-history-timeline" id="gitHistoryTimeline"></div>
                </div>
                <div id="commitsError" style="display: none;"></div>
            </div>
        </div>

        <!-- Top Contributors -->
        <div class="content-box">
            <div class="box-header">
                <h2><i class="fa-solid fa-users"></i> Top Contributors</h2>
            </div>
            <div class="box-body">
                <div id="contributorsLoading" class="loading">
                    <i class="fa-solid fa-spinner fa-spin"></i> Loading contributors...
                </div>
                <div id="contributorsContent" style="display: none;">
                    <div class="contributors-grid" id="contributorsGrid"></div>
                </div>
                <div id="contributorsError" style="display: none;"></div>
            </div>
        </div>
    </div>

    <footer class="page-footer">
        <p>AcreetionOS Git Tracker - Real-time development activity from <a
                href="https://github.com/AcreetionOS-Linux" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
        <p>Â© 2025 AcreetionOS Project</p>
    </footer>

    <script>
        // GitHub API configuration
        const GITHUB_ORG = 'AcreetionOS-Linux';
        const REPOS = ['acreetionos-linux.github.io', 'acreetionos', 'acreetionos-pkgbuilds'];
        let commitChart = null;

        // Utility function to format dates
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            if (diffMins < 60) return `${diffMins} minute${diffMins !== 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            if (diffDays < 30) return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            return date.toLocaleDateString();
        }

        // Fetch data from GitHub API
        async function fetchGitHubData(endpoint) {
            try {
                const response = await fetch(`https://api.github.com/${endpoint}`, {
                    headers: {
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching GitHub data:', error);
                throw error;
            }
        }

        // Load repository statistics
        async function loadRepoStats() {
            try {
                document.getElementById('statsLoading').style.display = 'block';
                document.getElementById('statsContent').style.display = 'none';
                document.getElementById('statsError').style.display = 'none';

                let totalCommits = 0;
                let totalStars = 0;
                let totalIssues = 0;
                const contributorsSet = new Set();

                for (const repo of REPOS) {
                    try {
                        const repoData = await fetchGitHubData(`repos/${GITHUB_ORG}/${repo}`);
                        totalStars += repoData.stargazers_count || 0;
                        totalIssues += repoData.open_issues_count || 0;

                        // Fetch commits for this repo (limited to 100 for API rate limits)
                        const commits = await fetchGitHubData(`repos/${GITHUB_ORG}/${repo}/commits?per_page=100`);
                        totalCommits += commits.length;

                        // Collect unique contributors
                        commits.forEach(commit => {
                            if (commit.author && commit.author.login) {
                                contributorsSet.add(commit.author.login);
                            }
                        });
                    } catch (error) {
                        console.error(`Error fetching data for ${repo}:`, error);
                    }
                }

                document.getElementById('totalCommits').textContent = totalCommits + '+';
                document.getElementById('totalContributors').textContent = contributorsSet.size;
                document.getElementById('openIssues').textContent = totalIssues;
                document.getElementById('totalStars').textContent = totalStars;

                document.getElementById('statsLoading').style.display = 'none';
                document.getElementById('statsContent').style.display = 'block';
            } catch (error) {
                document.getElementById('statsLoading').style.display = 'none';
                document.getElementById('statsError').style.display = 'block';
                document.getElementById('statsError').className = 'error';
                document.getElementById('statsError').textContent = 'Failed to load repository statistics. Please try again later.';
            }
        }

        // Load commit activity chart
        async function loadCommitActivity() {
            try {
                document.getElementById('chartLoading').style.display = 'block';
                document.getElementById('chartContent').style.display = 'none';
                document.getElementById('chartError').style.display = 'none';

                const allCommits = [];
                
                for (const repo of REPOS) {
                    try {
                        const commits = await fetchGitHubData(`repos/${GITHUB_ORG}/${repo}/commits?per_page=100`);
                        allCommits.push(...commits);
                    } catch (error) {
                        console.error(`Error fetching commits for ${repo}:`, error);
                    }
                }

                // Group commits by date (last 30 days)
                const commitsByDate = {};
                const today = new Date();
                for (let i = 29; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    commitsByDate[dateStr] = 0;
                }

                allCommits.forEach(commit => {
                    const date = new Date(commit.commit.author.date);
                    const dateStr = date.toISOString().split('T')[0];
                    if (commitsByDate.hasOwnProperty(dateStr)) {
                        commitsByDate[dateStr]++;
                    }
                });

                const labels = Object.keys(commitsByDate);
                const data = Object.values(commitsByDate);

                // Create chart
                const ctx = document.getElementById('commitChart').getContext('2d');
                if (commitChart) {
                    commitChart.destroy();
                }
                commitChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels.map(date => {
                            const d = new Date(date);
                            return `${d.getMonth() + 1}/${d.getDate()}`;
                        }),
                        datasets: [{
                            label: 'Commits',
                            data: data,
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#b2b2b2',
                                    stepSize: 1
                                },
                                grid: {
                                    color: '#333333'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#b2b2b2'
                                },
                                grid: {
                                    color: '#333333'
                                }
                            }
                        }
                    }
                });

                document.getElementById('chartLoading').style.display = 'none';
                document.getElementById('chartContent').style.display = 'block';
            } catch (error) {
                document.getElementById('chartLoading').style.display = 'none';
                document.getElementById('chartError').style.display = 'block';
                document.getElementById('chartError').className = 'error';
                document.getElementById('chartError').textContent = 'Failed to load commit activity. Please try again later.';
            }
        }

        // Load git commit history with visual timeline
        async function loadGitHistory() {
            try {
                document.getElementById('commitsLoading').style.display = 'block';
                document.getElementById('commitsContent').style.display = 'none';
                document.getElementById('commitsError').style.display = 'none';

                const allCommits = [];
                
                // Fetch commits from all repositories
                for (const repo of REPOS) {
                    try {
                        const commits = await fetchGitHubData(`repos/${GITHUB_ORG}/${repo}/commits?per_page=20`);
                        commits.forEach(commit => {
                            allCommits.push({ ...commit, repo });
                        });
                    } catch (error) {
                        console.error(`Error fetching commits for ${repo}:`, error);
                    }
                }

                // Sort by date (most recent first) and take top 30
                allCommits.sort((a, b) => new Date(b.commit.author.date) - new Date(a.commit.author.date));
                const recentCommits = allCommits.slice(0, 30);

                const timeline = document.getElementById('gitHistoryTimeline');
                timeline.innerHTML = '';

                // Create visual timeline entries
                recentCommits.forEach((commit, index) => {
                    const entry = document.createElement('div');
                    entry.className = 'git-commit-entry';
                    
                    const avatarUrl = commit.author?.avatar_url || 'https://github.com/identicons/default.png';
                    const authorName = commit.commit.author.name;
                    const authorLogin = commit.author?.login || 'unknown';
                    const message = commit.commit.message.split('\n')[0];
                    const fullMessage = commit.commit.message;
                    const sha = commit.sha.substring(0, 7);
                    const fullSha = commit.sha;
                    const date = formatDate(commit.commit.author.date);
                    const repoName = commit.repo;

                    // Create commit card HTML
                    entry.innerHTML = `
                        <div class="git-commit-dot"></div>
                        <div class="git-commit-card">
                            <div class="git-commit-header">
                                <img src="${avatarUrl}" alt="${authorName}" class="git-commit-avatar">
                                <div class="git-commit-author-info">
                                    <div class="git-commit-author">${authorName} (@${authorLogin})</div>
                                    <div class="git-commit-time">${date}</div>
                                </div>
                                <a href="https://github.com/${GITHUB_ORG}/${repoName}/commit/${fullSha}" 
                                   target="_blank" rel="noopener noreferrer" 
                                   class="git-commit-sha-badge" 
                                   title="${fullSha}">
                                   <i class="fa-solid fa-code-commit"></i> ${sha}
                                </a>
                            </div>
                            <div class="git-commit-message">${escapeHtml(message)}</div>
                            <div class="git-commit-repo">
                                <i class="fa-brands fa-github"></i>
                                <span>${repoName}</span>
                            </div>
                        </div>
                    `;
                    
                    timeline.appendChild(entry);
                });

                document.getElementById('commitsLoading').style.display = 'none';
                document.getElementById('commitsContent').style.display = 'block';
            } catch (error) {
                document.getElementById('commitsLoading').style.display = 'none';
                document.getElementById('commitsError').style.display = 'block';
                document.getElementById('commitsError').className = 'error';
                document.getElementById('commitsError').textContent = 'Failed to load git history. Please try again later.';
            }
        }

        // Helper function to escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Load top contributors
        async function loadContributors() {
            try {
                document.getElementById('contributorsLoading').style.display = 'block';
                document.getElementById('contributorsContent').style.display = 'none';
                document.getElementById('contributorsError').style.display = 'none';

                const contributorsMap = new Map();

                for (const repo of REPOS) {
                    try {
                        const contributors = await fetchGitHubData(`repos/${GITHUB_ORG}/${repo}/contributors`);
                        contributors.forEach(contributor => {
                            const login = contributor.login;
                            if (contributorsMap.has(login)) {
                                contributorsMap.get(login).contributions += contributor.contributions;
                            } else {
                                contributorsMap.set(login, {
                                    login: login,
                                    avatar_url: contributor.avatar_url,
                                    contributions: contributor.contributions
                                });
                            }
                        });
                    } catch (error) {
                        console.error(`Error fetching contributors for ${repo}:`, error);
                    }
                }

                // Convert to array and sort by contributions
                const contributorsArray = Array.from(contributorsMap.values());
                contributorsArray.sort((a, b) => b.contributions - a.contributions);
                const topContributors = contributorsArray.slice(0, 12);

                const contributorsGrid = document.getElementById('contributorsGrid');
                contributorsGrid.innerHTML = '';

                topContributors.forEach(contributor => {
                    const card = document.createElement('div');
                    card.className = 'contributor-card';
                    card.innerHTML = `
                        <img src="${contributor.avatar_url}" alt="${contributor.login}" class="contributor-avatar">
                        <div class="contributor-name">${contributor.login}</div>
                        <div class="contributor-commits">${contributor.contributions} commits</div>
                    `;
                    contributorsGrid.appendChild(card);
                });

                document.getElementById('contributorsLoading').style.display = 'none';
                document.getElementById('contributorsContent').style.display = 'block';
            } catch (error) {
                document.getElementById('contributorsLoading').style.display = 'none';
                document.getElementById('contributorsError').style.display = 'block';
                document.getElementById('contributorsError').className = 'error';
                document.getElementById('contributorsError').textContent = 'Failed to load contributors. Please try again later.';
            }
        }

        // Refresh all data
        async function refreshData() {
            const btn = document.getElementById('refreshBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Refreshing...';

            await Promise.all([
                loadRepoStats(),
                loadCommitActivity(),
                loadGitHistory(),
                loadContributors()
            ]);

            btn.disabled = false;
            btn.innerHTML = '<i class="fa-solid fa-rotate"></i> Refresh';
        }

        // Load all data on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadRepoStats();
            loadCommitActivity();
            loadGitHistory();
            loadContributors();
        });
    </script>
</body>

</html>
